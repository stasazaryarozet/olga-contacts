# Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Ð¨Ð°Ð³Ð¸: Temporal Analysis + Graph UI

**ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚Ñ‹ Ð¾Ñ‚ Gemini (Ð¾Ð¿Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÑƒÐ»ÑƒÑ‡ÑˆÐµÐ½Ð¸Ñ)**

---

## ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚ 1: Temporal Analysis (1 Ð´ÐµÐ½ÑŒ)

**Ð¦ÐµÐ»ÑŒ:** ÐÐ½Ð°Ð»Ð¸Ð· Ð´Ð¸Ð½Ð°Ð¼Ð¸ÐºÐ¸ ÑÐ²ÑÐ·ÐµÐ¹ Ð²Ð¾ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸

### Ð§Ñ‚Ð¾ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð¾: `scripts/temporal_analysis.py`

**Ð—Ð°Ð¿Ñ€Ð¾ÑÑ‹:**

1. **Ð¢Ð¾Ð¿ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð² Ð·Ð° Ð³Ð¾Ð´**
   ```bash
   python3 scripts/temporal_analysis.py --year 2024 --top 20
   ```
   â†’ ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ñ ÐºÐµÐ¼ Ñ‡Ð°Ñ‰Ðµ Ð²ÑÐµÐ³Ð¾ Ð²ÑÑ‚Ñ€ÐµÑ‡Ð°Ð»Ð°ÑÑŒ ÐžÐ»ÑŒÐ³Ð° Ð² 2024

2. **"ÐžÑÑ‚Ñ‹Ð²ÑˆÐ¸Ðµ" ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹**
   ```bash
   python3 scripts/temporal_analysis.py
   ```
   â†’ ÐÐ°Ñ…Ð¾Ð´Ð¸Ñ‚ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹ Ð±ÐµÐ· Ð²ÑÑ‚Ñ€ÐµÑ‡ > 2 Ð»ÐµÑ‚

3. **Ð”Ð¸Ð½Ð°Ð¼Ð¸ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°**
   ```bash
   python3 scripts/temporal_analysis.py --project "Ð”ÐµÐºÐ¾Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ"
   ```
   â†’ ÐŸÐ¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð²ÑÐµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð¿Ð¾ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ñƒ + Ñ‡Ð°ÑÑ‚Ð¾Ñ‚Ñƒ Ð²ÑÑ‚Ñ€ÐµÑ‡

4. **Ð§Ð°ÑÑ‚Ð¾Ñ‚Ð° Ð²ÑÑ‚Ñ€ÐµÑ‡ Ð¿Ð¾ Ð³Ð¾Ð´Ð°Ð¼**
   â†’ ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ñ€Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð²ÑÑ‚Ñ€ÐµÑ‡

5. **Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸**
   â†’ ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð³ÐµÐ½ÐµÑ€Ð¸Ñ€ÑƒÐµÑ‚ Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸

### Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

```bash
cd contacts
source venv/bin/activate
chmod +x scripts/temporal_analysis.py
```

### ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ñ

**Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ð·Ð°Ð¿ÑƒÑÐº (Ð²ÑÐµ Ð°Ð½Ð°Ð»Ð¸Ð·Ñ‹):**
```bash
python3 scripts/temporal_analysis.py
```

**Ð¢Ð¾Ð¿-10 ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð² 2023:**
```bash
python3 scripts/temporal_analysis.py --year 2023 --top 10
```

**ÐÐ½Ð°Ð»Ð¸Ð· Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð° "Ð‘Ð’Ð¨Ð”":**
```bash
python3 scripts/temporal_analysis.py --project "Ð‘Ð’Ð¨Ð”"
```

### ÐžÐ¶Ð¸Ð´Ð°ÐµÐ¼Ñ‹Ð¹ output

```
======================================================================
TEMPORAL ANALYSIS: ÐÐ½Ð°Ð»Ð¸Ð· Ð´Ð¸Ð½Ð°Ð¼Ð¸ÐºÐ¸ ÑÐ²ÑÐ·ÐµÐ¹
======================================================================

ðŸ“Š Ð¢Ð¾Ð¿-20 ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð² ÐžÐ»ÑŒÐ³Ð° Ð Ð¾Ð·ÐµÑ‚ Ð² 2024:
  1. ÐÐ½Ð½Ð° Ð¨ÐºÑƒÑ€Ð°Ñ‚Ð¾Ð²Ð°: 45 Ð²ÑÑ‚Ñ€ÐµÑ‡
  2. Ð¢Ð¸Ð¼ÑƒÑ€ ÐÐ±Ð´ÑƒÐ»Ð»Ð°ÐµÐ²: 38 Ð²ÑÑ‚Ñ€ÐµÑ‡
  3. ÐœÐ¸Ð»Ð°Ð½Ð° ÐšÐ¾Ñ€Ð¾Ð»ÐµÐ²Ð°: 32 Ð²ÑÑ‚Ñ€ÐµÑ‡Ð¸
  ...

â„ï¸  'ÐžÑÑ‚Ñ‹Ð²ÑˆÐ¸Ðµ' ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹ (> 24 Ð¼ÐµÑÑÑ†ÐµÐ² Ð±ÐµÐ· Ð²ÑÑ‚Ñ€ÐµÑ‡):
  Ð˜Ð²Ð°Ð½ Ð¡Ð¼Ð¸Ñ€Ð½Ð¾Ð²: Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÑÑ Ð²ÑÑ‚Ñ€ÐµÑ‡Ð° Ð² 2021
  ÐœÐ°Ñ€Ð¸Ñ ÐŸÐµÑ‚Ñ€Ð¾Ð²Ð°: Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÑÑ Ð²ÑÑ‚Ñ€ÐµÑ‡Ð° Ð² 2020
  ...

ðŸ”— Ð¢Ð¾Ð¿-10 ÑÐ°Ð¼Ñ‹Ñ… ÑÐ¸Ð»ÑŒÐ½Ñ‹Ñ… ÑÐ²ÑÐ·ÐµÐ¹ ÐžÐ»ÑŒÐ³Ð° Ð Ð¾Ð·ÐµÑ‚:
  1. ÐÐ½Ð½Ð° Ð¨ÐºÑƒÑ€Ð°Ñ‚Ð¾Ð²Ð°: 156 ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð½Ñ‹Ñ… ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹
  2. Ð¢Ð¸Ð¼ÑƒÑ€ ÐÐ±Ð´ÑƒÐ»Ð»Ð°ÐµÐ²: 134 ÑÐ¾Ð²Ð¼ÐµÑÑ‚Ð½Ñ‹Ñ… ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹
  ...

ðŸ“… Ð§Ð°ÑÑ‚Ð¾Ñ‚Ð° Ð²ÑÑ‚Ñ€ÐµÑ‡ Ð¿Ð¾ Ð³Ð¾Ð´Ð°Ð¼:
  2020: 234 Ð²ÑÑ‚Ñ€ÐµÑ‡
  2021: 312 Ð²ÑÑ‚Ñ€ÐµÑ‡
  2022: 445 Ð²ÑÑ‚Ñ€ÐµÑ‡
  2023: 567 Ð²ÑÑ‚Ñ€ÐµÑ‡
  2024: 423 Ð²ÑÑ‚Ñ€ÐµÑ‡Ð¸

ðŸ’¡ Ð Ð•ÐšÐžÐœÐ•ÐÐ”ÐÐ¦Ð˜Ð˜:
  âš ï¸  Ð£ Ð²Ð°Ñ 15 ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð² Ð±ÐµÐ· Ð²ÑÑ‚Ñ€ÐµÑ‡ > 1 Ð³Ð¾Ð´Ð°
      Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ñ: ÐÐ°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð¸Ð¼ Ð¸Ð»Ð¸ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ð²ÑÑ‚Ñ€ÐµÑ‡Ñƒ

  âœ… Ð’Ð°ÑˆÐ¸ ÐºÐ»ÑŽÑ‡ÐµÐ²Ñ‹Ðµ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹ 2024:
      - ÐÐ½Ð½Ð° Ð¨ÐºÑƒÑ€Ð°Ñ‚Ð¾Ð²Ð° (45 Ð²ÑÑ‚Ñ€ÐµÑ‡)
      - Ð¢Ð¸Ð¼ÑƒÑ€ ÐÐ±Ð´ÑƒÐ»Ð»Ð°ÐµÐ² (38 Ð²ÑÑ‚Ñ€ÐµÑ‡)
      - ÐœÐ¸Ð»Ð°Ð½Ð° ÐšÐ¾Ñ€Ð¾Ð»ÐµÐ²Ð° (32 Ð²ÑÑ‚Ñ€ÐµÑ‡Ð¸)

âœ… ÐÐ½Ð°Ð»Ð¸Ð· Ð·Ð°Ð²ÐµÑ€ÑˆÑ‘Ð½
```

### Ð”Ð»Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸

SQL Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð²Ð½ÑƒÑ‚Ñ€Ð¸ ÑÐºÑ€Ð¸Ð¿Ñ‚Ð° Ð¼Ð¾Ð¶Ð½Ð¾ Ð°Ð´Ð°Ð¿Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ:

```python
# ÐŸÑ€Ð¸Ð¼ÐµÑ€: ÐÐ°Ð¹Ñ‚Ð¸ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹ Ð¿Ð¾ Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð°Ñ†Ð¸Ð¸
cursor = db.conn.execute("""
    SELECT n.name, COUNT(*) as meetings
    FROM facts f
    JOIN nodes n ON f.object_id = n.canonical_id
    JOIN facts f2 ON n.canonical_id = f2.subject_id
    WHERE f.relation_type = 'co_attended'
      AND f2.relation_type = 'works_at'
      AND f2.object_id LIKE '%Ð’Ð‘Ð¨Ð”%'
    GROUP BY n.name
    ORDER BY meetings DESC
""")
```

---

## ÐŸÑ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚ 2: Graph Query UI (1 Ð´ÐµÐ½ÑŒ)

**Ð¦ÐµÐ»ÑŒ:** Web-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ Ð´Ð»Ñ ÐžÐ»ÑŒÐ³Ð¸ (ÑÐ°Ð¼Ð¾ÑÑ‚Ð¾ÑÑ‚ÐµÐ»ÑŒÐ½Ð¾Ðµ Ð¸ÑÑÐ»ÐµÐ´Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð³Ñ€Ð°Ñ„Ð°)

### Ð§Ñ‚Ð¾ Ñ€ÐµÐ°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð¾: `scripts/graph_ui.py`

**Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸:**

1. **Ð¢Ð¾Ð¿ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð²**
   - Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ Ð³Ð¾Ð´Ñƒ
   - Ð¢Ð¾Ð¿-N (5-50)
   - Ð’Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ (bar chart)

2. **ÐžÑÑ‚Ñ‹Ð²ÑˆÐ¸Ðµ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹**
   - Ð¤Ð¸Ð»ÑŒÑ‚Ñ€ Ð¿Ð¾ Ð¿ÐµÑ€Ð¸Ð¾Ð´Ñƒ (6-36 Ð¼ÐµÑÑÑ†ÐµÐ²)
   - Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÐµÐ¹ Ð²ÑÑ‚Ñ€ÐµÑ‡ÐµÐ¹
   - Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸

3. **ÐŸÐ¾Ð¸ÑÐº ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹**
   - ÐŸÐ¾Ð¸ÑÐº Ð¿Ð¾ ÐºÐ»ÑŽÑ‡ÐµÐ²Ð¾Ð¼Ñƒ ÑÐ»Ð¾Ð²Ñƒ
   - Ð¡Ð¿Ð¸ÑÐ¾Ðº ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²
   - Ð“Ð¾Ð´ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ

4. **Ð’Ñ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ ÑˆÐºÐ°Ð»Ð°**
   - Ð Ð°ÑÐ¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð²ÑÑ‚Ñ€ÐµÑ‡ Ð¿Ð¾ Ð³Ð¾Ð´Ð°Ð¼
   - Ð›Ð¸Ð½ÐµÐ¹Ð½Ñ‹Ð¹ Ð³Ñ€Ð°Ñ„Ð¸Ðº

### Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ°

```bash
cd contacts
source venv/bin/activate
pip install streamlit pandas plotly
```

### Ð—Ð°Ð¿ÑƒÑÐº

```bash
streamlit run scripts/graph_ui.py
```

ÐžÑ‚ÐºÑ€Ð¾ÐµÑ‚ÑÑ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€ Ð½Ð° `http://localhost:8501`

### Ð¡ÐºÑ€Ð¸Ð½ÑˆÐ¾Ñ‚Ñ‹ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ°

**Ð“Ð»Ð°Ð²Ð½Ð°Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð°:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ðŸ”— Ð“Ñ€Ð°Ñ„ ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð² ÐžÐ»ÑŒÐ³Ð¸ Ð Ð¾Ð·ÐµÑ‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Sidebar:                                    â”‚
â”‚   ðŸ“Š Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°                            â”‚
â”‚   ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð²: 1,514                         â”‚
â”‚   Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ð¹: 235                             â”‚
â”‚   Ð¡Ð²ÑÐ·ÐµÐ¹: 4,084                            â”‚
â”‚   Ð“Ð¾Ð´Ñ‹: 2015-2025                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Tabs:                                       â”‚
â”‚   [ðŸ† Ð¢Ð¾Ð¿ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð²] [â„ï¸ ÐžÑÑ‚Ñ‹Ð²ÑˆÐ¸Ðµ]        â”‚
â”‚   [ðŸ” ÐŸÐ¾Ð¸ÑÐº ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹] [ðŸ“ˆ Ð’Ñ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ ÑˆÐºÐ°Ð»Ð°]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Tab: Ð¢Ð¾Ð¿ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð²**
```
Ð“Ð¾Ð´: [2024 â–¼]    ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð¿: [20]
[ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚            â”‚ Ð’ÑÑ‚Ñ€ÐµÑ‡          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ÐÐ½Ð½Ð° Ð¨ÐºÑƒÑ€Ð°Ñ‚Ð¾Ð²Ð°     â”‚ 45              â”‚
â”‚ Ð¢Ð¸Ð¼ÑƒÑ€ ÐÐ±Ð´ÑƒÐ»Ð»Ð°ÐµÐ²    â”‚ 38              â”‚
â”‚ ÐœÐ¸Ð»Ð°Ð½Ð° ÐšÐ¾Ñ€Ð¾Ð»ÐµÐ²Ð°    â”‚ 32              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[Bar Chart: Ð¢Ð¾Ð¿-15 ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð² 2024]
```

**Tab: ÐŸÐ¾Ð¸ÑÐº ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹**
```
ÐšÐ»ÑŽÑ‡ÐµÐ²Ð¾Ðµ ÑÐ»Ð¾Ð²Ð¾: [Ð”ÐµÐºÐ¾Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ        ]
[ÐÐ°Ð¹Ñ‚Ð¸]

ÐÐ°Ð¹Ð´ÐµÐ½Ð¾ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹: 87

ðŸ“… Ð”ÐµÐºÐ¾Ñ€Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð¸Ð½Ñ‚ÐµÑ€ÑŒÐµÑ€Ð°_Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹ (4 ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²)
   â–¼ Ð“Ð¾Ð´: 2024
     Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²: 4
     Ð£Ñ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¸:
     - ÐžÐ»ÑŒÐ³Ð° Ð Ð¾Ð·ÐµÑ‚
     - ÐÐ½Ð½Ð° Ð¨ÐºÑƒÑ€Ð°Ñ‚Ð¾Ð²Ð°
     - Ð¢Ð¸Ð¼ÑƒÑ€ ÐÐ±Ð´ÑƒÐ»Ð»Ð°ÐµÐ²
     - ÐœÐ¸Ð»Ð°Ð½Ð° ÐšÐ¾Ñ€Ð¾Ð»ÐµÐ²Ð°
```

### ÐšÐ°ÑÑ‚Ð¾Ð¼Ð¸Ð·Ð°Ñ†Ð¸Ñ UI

Ð”Ð»Ñ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð½Ð¾Ð²Ñ‹Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹ `scripts/graph_ui.py`:

```python
# Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ tab
with tab5:
    st.header("ÐœÐ¾Ð¹ Ð½Ð¾Ð²Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ")
    
    # SQL query
    cursor = db.conn.execute("""
        SELECT ...
    """)
    
    # Display results
    results = cursor.fetchall()
    st.dataframe(results)
```

---

## ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ð·Ð°Ñ†Ð¸Ñ (Cron Job)

### Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ðµ email-Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸

```bash
# Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð² crontab
crontab -e

# ÐšÐ°Ð¶Ð´Ð¾Ðµ ÑƒÑ‚Ñ€Ð¾ Ð² 9:00
0 9 * * * cd contacts && source venv/bin/activate && python3 scripts/temporal_analysis.py > /tmp/contacts_report.txt && mail -s "Contact Report" olga@email.com < /tmp/contacts_report.txt
```

### Ð•Ð¶ÐµÐ½ÐµÐ´ÐµÐ»ÑŒÐ½Ñ‹Ð¹ dashboard

```bash
# ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ð¸Ðº Ð² 8:00
0 8 * * 1 cd contacts && source venv/bin/activate && streamlit run scripts/graph_ui.py --server.headless true --server.port 8501
```

---

## Ð­ÐºÑÐ¿Ð¾Ñ€Ñ‚ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²

### CSV Ð´Ð»Ñ Excel

```python
# Ð’ temporal_analysis.py Ð´Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ:
import csv

results = analyze_top_contacts_by_year(db, 2024)

with open('top_contacts_2024.csv', 'w', newline='', encoding='utf-8') as f:
    writer = csv.writer(f)
    writer.writerow(['ÐšÐ¾Ð½Ñ‚Ð°ÐºÑ‚', 'Ð’ÑÑ‚Ñ€ÐµÑ‡'])
    writer.writerows(results)

print("âœ… Exported to top_contacts_2024.csv")
```

### PDF report

```bash
pip install fpdf

python3 -c "
from fpdf import FPDF
# ... generate PDF with analysis results
"
```

---

## Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ Ð´Ñ€ÑƒÐ³Ð¸Ð¼Ð¸ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð°Ð¼Ð¸

### Notion

```python
import requests

NOTION_API_KEY = "secret_..."
DATABASE_ID = "..."

# Create page in Notion with top contacts
requests.post(
    f"https://api.notion.com/v1/pages",
    headers={
        "Authorization": f"Bearer {NOTION_API_KEY}",
        "Notion-Version": "2022-06-28"
    },
    json={
        "parent": {"database_id": DATABASE_ID},
        "properties": {
            "Name": {"title": [{"text": {"content": "Top Contacts 2024"}}]},
            ...
        }
    }
)
```

### Telegram Bot

```python
import telebot

bot = telebot.TeleBot("YOUR_BOT_TOKEN")

@bot.message_handler(commands=['top'])
def send_top_contacts(message):
    results = get_top_contacts(db, 2024, 10)
    text = "\n".join([f"{i}. {name}: {count}" for i, (name, count) in enumerate(results, 1)])
    bot.reply_to(message, f"Ð¢Ð¾Ð¿-10 ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð² 2024:\n{text}")

bot.polling()
```

---

## ÐŸÑ€Ð¸Ð¼ÐµÑ€Ñ‹ SQL Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð´Ð»Ñ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ

### ÐÐ°Ð¹Ñ‚Ð¸ Ð¾Ð±Ñ‰Ð¸Ñ… Ð·Ð½Ð°ÐºÐ¾Ð¼Ñ‹Ñ…

```sql
SELECT n3.name as common_contact, COUNT(*) as meetings
FROM facts f1
JOIN facts f2 ON f1.object_id = f2.object_id
JOIN nodes n3 ON f1.subject_id = n3.canonical_id
WHERE f1.relation_type = 'co_attended'
  AND f2.relation_type = 'co_attended'
  AND f2.subject_id LIKE '%Rozet%'
  AND f1.subject_id != f2.subject_id
GROUP BY n3.name
ORDER BY meetings DESC
LIMIT 20;
```

### ÐÐ°Ð¹Ñ‚Ð¸ "ÐºÐ¾Ð½Ð½ÐµÐºÑ‚Ð¾Ñ€Ð¾Ð²" (ÐºÑ‚Ð¾ Ð·Ð½Ð°ÐºÐ¾Ð¼Ð¸Ñ‚ Ð»ÑŽÐ´ÐµÐ¹)

```sql
SELECT n.name, COUNT(DISTINCT f2.subject_id) as connections
FROM facts f1
JOIN facts f2 ON f1.object_id = f2.object_id
JOIN nodes n ON f1.subject_id = n.canonical_id
WHERE f1.relation_type = 'co_attended'
  AND f2.relation_type = 'co_attended'
  AND f1.subject_id != f2.subject_id
GROUP BY n.name
ORDER BY connections DESC
LIMIT 20;
```

### Temporal: Ð Ð¾ÑÑ‚ ÑÐµÑ‚Ð¸ Ð¿Ð¾ Ð¼ÐµÑÑÑ†Ð°Ð¼

```sql
-- (Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° Ð´Ð°Ñ‚ Ð¸Ð· context)
SELECT strftime('%Y-%m', created_at) as month, COUNT(*) as new_connections
FROM facts
WHERE relation_type = 'co_attended'
GROUP BY month
ORDER BY month;
```

---

## Ð˜Ñ‚Ð¾Ð³Ð¾: Ð§Ñ‚Ð¾ Ð¿Ð¾Ð»ÑƒÑ‡Ð°ÐµÑˆÑŒ

### Temporal Analysis (scripts/temporal_analysis.py)

âœ… ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð°Ð½Ð°Ð»Ð¸Ð·:
- Ð¢Ð¾Ð¿ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ð¾Ð² Ð¿Ð¾ Ð³Ð¾Ð´Ð°Ð¼
- ÐžÑÑ‚Ñ‹Ð²ÑˆÐ¸Ðµ ÐºÐ¾Ð½Ñ‚Ð°ÐºÑ‚Ñ‹
- Ð¡Ð¸Ð»Ð° ÑÐ²ÑÐ·ÐµÐ¹
- Ð”Ð¸Ð½Ð°Ð¼Ð¸ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ð²
- Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸

**Ð’Ñ€ÐµÐ¼Ñ:** 30 ÑÐµÐºÑƒÐ½Ð´ Ð·Ð°Ð¿ÑƒÑÐº

### Graph Query UI (scripts/graph_ui.py)

âœ… Web-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹Ñ:
- Ð˜Ð½Ñ‚ÐµÑ€Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹
- Ð’Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ (Ð³Ñ€Ð°Ñ„Ð¸ÐºÐ¸)
- ÐŸÐ¾Ð¸ÑÐº ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹
- Ð’Ñ€ÐµÐ¼ÐµÐ½Ð½Ð°Ñ ÑˆÐºÐ°Ð»Ð°

**Ð’Ñ€ÐµÐ¼Ñ:** `streamlit run` â†’ instant access

---

**ÐžÐ±Ð° Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ð° Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹ Ðº Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÑŽ Ð¿Ñ€ÑÐ¼Ð¾ ÑÐµÐ¹Ñ‡Ð°Ñ!**

**Ð—Ð°Ð¿ÑƒÑÐº:**
```bash
cd contacts
source venv/bin/activate

# Temporal Analysis
python3 scripts/temporal_analysis.py

# Graph UI
streamlit run scripts/graph_ui.py
```

