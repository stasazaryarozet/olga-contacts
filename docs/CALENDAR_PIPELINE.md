# Calendar Pipeline: –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

**–¶–µ–ª—å:** –ò–∑–≤–ª–µ—á—å —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∏–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è (–∫—Ç–æ —Å –∫–µ–º –≤—Å—Ç—Ä–µ—á–∞–ª—Å—è)

**–ú–µ—Ç–æ–¥:** –≠–∫—Å–ø–æ—Ä—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è –≤ ICS ‚Üí –ø–∞—Ä—Å–∏–Ω–≥ ‚Üí –≥—Ä–∞—Ñ (–±–µ–∑ Google Cloud)

---

## –ß—Ç–æ –¥–∞—ë—Ç Calendar Pipeline?

### Relations (E):
- **`participated_in`** ‚Äî –∫—Ç–æ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤ —Å–æ–±—ã—Ç–∏–∏
- **`co_attended`** ‚Äî –∫—Ç–æ –≤—Å—Ç—Ä–µ—á–∞–ª—Å—è —Å –∫–µ–º (N√óN —Å–≤—è–∑–∏)

### Example:
```
Event: "–í—Å—Ç—Ä–µ—á–∞ –ø–æ –ø—Ä–æ–µ–∫—Ç—É X"
Attendees: –û–ª—å–≥–∞, –ù–∞—Ç–∞—à–∞, –ò–≤–∞–Ω

Relations created:
  –û–ª—å–≥–∞ ‚Üí participated_in ‚Üí "–í—Å—Ç—Ä–µ—á–∞ –ø–æ –ø—Ä–æ–µ–∫—Ç—É X"
  –ù–∞—Ç–∞—à–∞ ‚Üí participated_in ‚Üí "–í—Å—Ç—Ä–µ—á–∞ –ø–æ –ø—Ä–æ–µ–∫—Ç—É X"
  –ò–≤–∞–Ω ‚Üí participated_in ‚Üí "–í—Å—Ç—Ä–µ—á–∞ –ø–æ –ø—Ä–æ–µ–∫—Ç—É X"
  –û–ª—å–≥–∞ ‚ü∑ co_attended ‚ü∑ –ù–∞—Ç–∞—à–∞ (–∫–æ–Ω—Ç–µ–∫—Å—Ç: "–í—Å—Ç—Ä–µ—á–∞ –ø–æ –ø—Ä–æ–µ–∫—Ç—É X")
  –û–ª—å–≥–∞ ‚ü∑ co_attended ‚ü∑ –ò–≤–∞–Ω
  –ù–∞—Ç–∞—à–∞ ‚ü∑ co_attended ‚ü∑ –ò–≤–∞–Ω
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ì—Ä–∞—Ñ —Å–≤—è–∑–µ–π (–∫—Ç–æ —Å –∫–µ–º —Ä–∞–±–æ—Ç–∞–ª)

---

## –≠–∫—Å–ø–æ—Ä—Ç –∫–∞–ª–µ–Ω–¥–∞—Ä—è (30 —Å–µ–∫—É–Ω–¥)

### Google Calendar

1. –û—Ç–∫—Ä—ã—Ç—å: https://calendar.google.com
2. –í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç –û–ª—å–≥–∏
3. –í –ª–µ–≤–æ–º –º–µ–Ω—é: Settings (‚öôÔ∏è) ‚Üí Settings
4. Scroll down: **Import & Export**
5. –ù–∞–∂–∞—Ç—å **Export**
6. –°–∫–∞—á–∞–µ—Ç—Å—è ZIP —Ñ–∞–π–ª —Å ICS —Ñ–∞–π–ª–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
7. –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å ‚Üí –Ω–∞–π—Ç–∏ –≥–ª–∞–≤–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å (–æ–±—ã—á–Ω–æ `email@gmail.com.ics`)

### Apple Calendar (iCloud)

1. –ù–∞ Mac: –û—Ç–∫—Ä—ã—Ç—å Calendar.app
2. File ‚Üí Export ‚Üí Export...
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ `calendar.ics`

### Outlook

1. –û—Ç–∫—Ä—ã—Ç—å Outlook
2. File ‚Üí Open & Export ‚Üí Import/Export
3. Export to a file ‚Üí iCalendar Format (.ics)
4. –í—ã–±—Ä–∞—Ç—å Calendar ‚Üí Save

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd contacts
source venv/bin/activate
pip install icalendar
```

---

## –ó–∞–ø—É—Å–∫ Calendar Pipeline

```bash
cd contacts
source venv/bin/activate

# –ï—Å–ª–∏ ICS —Ñ–∞–π–ª –≤ Downloads
python3 scripts/process_calendar.py ~/Downloads/email@gmail.com.ics

# –ò–ª–∏ –ø–æ–ª–Ω—ã–π –ø—É—Ç—å
python3 scripts/process_calendar.py "/path/to/calendar.ics"
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
- –ü–∞—Ä—Å–∏—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è –∏–∑ ICS —Ñ–∞–π–ª–∞
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (Attendees + Organizer)
- –°–æ–∑–¥–∞—ë—Ç relations (participated_in, co_attended)
- –ó–∞–ø–∏—Å—ã–≤–∞–µ—Ç –≤ –≥—Ä–∞—Ñ

---

## –û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è

- **–≠–∫—Å–ø–æ—Ä—Ç ICS:** 30 —Å–µ–∫—É–Ω–¥
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ 500 —Å–æ–±—ã—Ç–∏–π:** 30-60 —Å–µ–∫—É–Ω–¥
- **–ò—Ç–æ–≥–æ:** 1-2 –º–∏–Ω—É—Ç—ã

---

## –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```bash
python3 -c "
import sys
sys.path.insert(0, 'src')
from graph_db import GraphDB

db = GraphDB()
stats = db.get_stats()

print('\nüìä GRAPH STATS:')
for k, v in stats.items():
    print(f'  {k}: {v}')

# Count co_attended relations
cursor = db.conn.execute('SELECT COUNT(*) FROM facts WHERE relation_type = \"co_attended\"')
co_attended = cursor.fetchone()[0]

print(f'\nü§ù Co-attended relations: {co_attended}')
print('   (These are the REAL graph edges!)')

db.close()
"
```

---

## Troubleshooting

### "File not found"
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç—å –∫ ICS —Ñ–∞–π–ª—É. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å –µ—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

### "No events found"
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ ICS —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–æ–±—ã—Ç–∏—è (–æ—Ç–∫—Ä—ã—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–µ–∫—Ü–∏–∏ `BEGIN:VEVENT`)

### "No attendees"
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–æ–±—ã—Ç–∏—è –º–æ–≥—É—Ç –Ω–µ –∏–º–µ—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–ª–∏—á–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è). –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ ‚Äî –æ–Ω–∏ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è.

---

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

**–î–ª—è 500 —Å–æ–±—ã—Ç–∏–π –∑–∞ 6 –º–µ—Å—è—Ü–µ–≤:**
- **+100-300 Event —É–∑–ª–æ–≤**
- **+500-1000 participated_in relations**
- **+1000-3000 co_attended relations** ‚Üê **–≠–¢–û –ì–†–ê–§!**

**–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã:**
- "–° –∫–µ–º –û–ª—å–≥–∞ —á–∞—â–µ –≤—Å–µ–≥–æ –≤—Å—Ç—Ä–µ—á–∞–ª–∞—Å—å?"
- "–ö—Ç–æ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª –≤ –ø—Ä–æ–µ–∫—Ç–µ X?"
- "–ö—Ç–æ –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª –û–ª—å–≥—É —Å Y?" (–æ–±—â–∏–µ —Å–æ–±—ã—Ç–∏—è)

---

**–≠—Ç–æ —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π –≥—Ä–∞—Ñ —Å–≤—è–∑–µ–π.**

